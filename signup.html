<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="signup.css" />
  <title>Sign Up</title>
</head>
<body>
  <!-- Topbar -->
  <header class="topbar">
    <div class="logo"><a href="MainPage.php">StyleMart</a></div>
  </header>

  <div class="container">
    <div class="back-btn"><a href="login.html"><img src="uploads/previous.png">Back</a></div>
    <div class="form-wrapper">
      <form class="form" action="signup.php" method="POST">
        <p class="form-title">User Sign Up</p>

        <div class="input-container">
          <input type="text" name="username" id="username" placeholder="Username" required>
          <span id="usernameError" class="error" style="color: red; font-size: 0.8rem; display: none;">Username already taken.</span>
        </div>

        <div class="input-container">
          <input type="email" name="email" id="email" placeholder="Email" required>
          <span id="emailError" class="error" style="color: red; font-size: 0.8rem; display: none;">Username or email already taken.</span>
        </div>

        <div class="input-container">
          <input type="password" name="password" id="password" placeholder="Password" required>
        </div>

        <div class="input-container">
          <input type="password" name="confirm_password" id="confirm_password" placeholder="Confirm Password" required>
          <span id="confirmError" class="error" style="color: red; font-size: 0.8rem; display: none;">Passwords do not match.</span>
        </div>

        <div class="input-container">
          <div class="checkbox-row">
            <input type="checkbox" name="agree_terms" id="agree_terms" required>
            <label for="agree_terms">Do you agree to the <a href="#">Terms and Conditions</a>?</label>
          </div>
          <span id="termsError" class="error">You must agree to the Terms and Conditions.</span><br><br>
        </div>

        <button class="submit" type="submit">Sign Up</button>

        <p class="signup-link">
          Already have an account? <a href="login.html">Log in here</a>.
        </p>
      </form>
    </div>
  </div>

  <script>
    window.onload = function () {
      const params = new URLSearchParams(window.location.search);
      const error = params.get('error');

      if (error === 'taken') {
        document.getElementById('usernameError').style.display = 'inline';
        document.getElementById('emailError').style.display = 'inline';
        document.getElementById('username').value = '';
        document.getElementById('email').value = '';
      }

      if (error === 'mismatch') {
        document.getElementById('confirmError').style.display = 'inline';
        document.getElementById('password').value = '';
        document.getElementById('confirm_password').value = '';
      }

      if (error === 'terms') {
        document.getElementById('termsError').style.display = 'inline';
      }
    };
  </script>
</body>
</html>
